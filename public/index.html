<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>
        <style>
            #issMap { height: 180px; }
        </style>
    <title>Document</title>
</head>
<body>
    <h1>My Location LIVE</h1>
    <p>
        Latitude : <span id="lat"></span>°</br>
        Latitude : <span id="lon"></span>°</br>
        Speed : <span id="speed"></span> Km/hr</br>
        Heading Towards : <span id="heading"></span>°</br>
        Altitude : <span id="altitude"></span> m

    </p>
    <script>
           </script>
    
    
        <div id="issMap"></div>
        
    <script>
        //Geolocation code...
        if('geolocation' in navigator)
        {
            const options ={
                enableHighAccuracy :true
            }
            const watchID=navigator.geolocation.watchPosition((position,options) => {
            const lat = position.coords.latitude
            const lon = position.coords.longitude
            const speed = position.coords.speed
            const heading = position.coords.heading
            const altitude = position.coords.altitude
            console.log(position.coords.latitude)
            console.log(position.coords.longitude)
            console.log(position)
            console.log(watchID)
            document.getElementById('lat').textContent = lat.toFixed(2)
            document.getElementById('lon').textContent = lon.toFixed(2) 
            document.getElementById('heading').textContent = heading.toFixed(2)
            document.getElementById('altitude').textContent = altitude.toFixed(2)
            if(heading === null)
            {
                document.getElementById('heading').textContent = "null"
            }
            else
            {
                document.getElementById('heading').textContent = heading
            }
            if(speed === null)
            {
            document.getElementById('speed').textContent = '"Not Moving"'
            }    
            else
            {
                document.getElementById('speed').textContent = speed
            }

             //Making a Map and Tiles
        const mymap = L.map('issMap').setView([0,0], 1);
        const attribution = 
                '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';
        const tileurl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';

        const tiles = L.tileLayer(tileurl,{attribution});
        tiles.addTo(mymap)
            //Making a Marker with custom Icon
       
        const marker = L.marker([0, 0]).addTo(mymap);
      

            let First = true;                              

                marker.setLatLng([lat,lon])
                if(First)
                {
                mymap.setView([lat,lon],2)
                First=false;
                }    
       
});
        }

         

    </script>
</body>
</html>